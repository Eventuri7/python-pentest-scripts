import argparse
import sys
import socket

def get_args():
    parser = argparse.ArgumentParser()
    parser.add_argument('-i', dest='ip', help='ip address')
    parser.add_argument('-p', dest='all_ports', action='store_true', help='scan for all ports')
    parser.add_argument('-c', dest='common_ports', action='store_true', help='scan for common ports')
    options = parser.parse_args()

    if not options.ip:
        parser.error('[-] Please specify an ip address, use --help for more info')

    return options


all_ports = range(1, 65535)
common_ports = {21, 22, 23, 53, 80, 135, 443, 445}

open_ports = []

def scan_port(target_ip, port, result = 1): 
    try: 
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        con = sock.connect_ex((target_ip, port))
        
        if con == 0: 
            result = con 
        
        sock.close() 
    
    except Exception as e: 
        pass 
    
    return result

# ...

def main():
    command_args = get_args()

    # ... 
    
    if open_ports: 
        print ("Open Ports are: ") 
        print (sorted(open_ports)) 
    else: 
        print ("Looks like no ports are open :(")

main()